{% extends "base.html" %}

{% block page_title %}Study Session{% endblock %}

{% block content %}
    {% if current_kanji %}
        <div class="kanji-card-container">
            <div class="kanji-card" id="kanjiCard">
                <div class="kanji-character">{{ current_kanji.character }}</div>
                
                <!-- This is the content that will be toggled -->
                <div class="kanji-meaning" id="kanjiMeaning" style="display: none;">
                    <p><strong>Meaning:</strong> {{ current_kanji.meaning }}</p>
                    {% if current_kanji.onyomi %}<p><strong>Onyomi:</strong> {{ current_kanji.onyomi }}</p>{% endif %}
                    {% if current_kanji.kunyomi %}<p><strong>Kunyomi:</strong> {{ current_kanji.kunyomi }}</p>{% endif %}
                    {% if current_kanji.grade %}<p><strong>Grade:</strong> {{ current_kanji.grade }}</p>{% endif %}
                </div>

                <!--
                  FIXES:
                  1. Removed onclick="toggleMeaning()"
                  2. Added id="toggleMeaningBtn"
                -->
                <button id="toggleMeaningBtn" class="btn btn-show-hide">Show Meaning</button>
            </div>
            <div class="review-buttons">
                <form action="/submit_review" method="post" style="display: inline;">
                    <input type="hidden" name="kanji_id" value="{{ current_kanji.id }}">
                    <button type="submit" name="quality" value="1" class="btn btn-danger">Hard</button>
                </form>
                <form action="/submit_review" method="post" style="display: inline;">
                    <input type="hidden" name="kanji_id" value="{{ current_kanji.id }}">
                    <button type="submit" name="quality" value="3" class="btn btn-warning">Good</button>
                </form>
                <form action="/submit_review" method="post" style="display: inline;">
                    <input type="hidden" name="kanji_id" value="{{ current_kanji.id }}">
                    <button type="submit" name="quality" value="5" class="btn btn-success">Easy</button>
                </form>
            </div>
        </div>
        <p class="reviews-left">Reviews left today: {{ total_reviews_today }}</p>
    {% else %}
        <div class="empty-state">
            <p>{{ message or "No kanji to review today!" }}</p>
            <a href="/add_kanji" class="btn btn-primary">Add New Kanji</a>
            <a href="/dashboard" class="btn btn-secondary">Go to Dashboard</a>
        </div>
    {% endif %}
{% endblock %}
